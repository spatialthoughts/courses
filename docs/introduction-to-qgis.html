<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ujaval Gandhi" />


<title>Introduction to QGIS (Full Course Material)</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PDGF11RK4Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PDGF11RK4Z');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Courses</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="http://spatialthoughts.com">Back to Main Site</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="#">Back to Top</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Introduction to QGIS (Full Course
Material)</h1>
<h3 class="subtitle">A Comprehensive Introduction to Mapping and Spatial
Analysis with QGIS.</h3>
<h4 class="author">Ujaval Gandhi</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#software" id="toc-software">Software</a></li>
<li><a href="#get-the-data-package" id="toc-get-the-data-package">Get
the Data Package</a></li>
<li><a href="#configuration-and-setup"
id="toc-configuration-and-setup">Configuration and Setup</a>
<ul>
<li><a href="#enable-required-toolbars"
id="toc-enable-required-toolbars">Enable Required Toolbars</a></li>
<li><a href="#install-required-plugins"
id="toc-install-required-plugins">Install Required Plugins</a></li>
</ul></li>
<li><a href="#creating-maps" id="toc-creating-maps">1. Creating Maps</a>
<ul>
<li><a href="#importing-vector-data" id="toc-importing-vector-data">1.1
Importing Vector Data</a>
<ul>
<li><a href="#challenge" id="toc-challenge">1.1.1 Challenge</a></li>
</ul></li>
<li><a href="#symbology" id="toc-symbology">1.2 Symbology</a>
<ul>
<li><a href="#challenge-1" id="toc-challenge-1">1.2.1 Challenge</a></li>
</ul></li>
<li><a href="#labelling" id="toc-labelling">1.3 Labelling</a>
<ul>
<li><a href="#challenge-2" id="toc-challenge-2">1.3.1 Challenge</a></li>
</ul></li>
<li><a href="#print-layout" id="toc-print-layout">1.4 Print Layout</a>
<ul>
<li><a href="#challenge-3" id="toc-challenge-3">1.4.1 Challenge</a></li>
</ul></li>
</ul></li>
<li><a href="#concept-joins-and-data-normalization"
id="toc-concept-joins-and-data-normalization">Concept: Joins and Data
Normalization</a></li>
<li><a href="#visualizing-spatial-data"
id="toc-visualizing-spatial-data">2. Visualizing Spatial Data</a>
<ul>
<li><a href="#table-join" id="toc-table-join">2.1 Table Join</a>
<ul>
<li><a href="#challenge-4" id="toc-challenge-4">2.1.1 Challenge</a></li>
</ul></li>
<li><a href="#creating-a-choropleth-map"
id="toc-creating-a-choropleth-map">2.2 Creating a Choropleth Map</a>
<ul>
<li><a href="#challenge-5" id="toc-challenge-5">2.2.1 Challenge</a></li>
</ul></li>
</ul></li>
<li><a href="#assignment" id="toc-assignment">Assignment</a></li>
<li><a href="#georeferencing" id="toc-georeferencing">3.
Georeferencing</a>
<ul>
<li><a href="#using-basemaps" id="toc-using-basemaps">3.1 Using
Basemaps</a>
<ul>
<li><a href="#challenge-6" id="toc-challenge-6">3.1.1 Challenge</a></li>
</ul></li>
<li><a href="#using-the-georeferencer"
id="toc-using-the-georeferencer">3.2 Using the Georeferencer</a>
<ul>
<li><a href="#challenge-7" id="toc-challenge-7">3.2.1 Challenge</a></li>
</ul></li>
</ul></li>
<li><a href="#data-editing" id="toc-data-editing">4. Data Editing</a>
<ul>
<li><a href="#attribute-forms" id="toc-attribute-forms">4.1 Attribute
Forms</a>
<ul>
<li><a href="#challenge-8" id="toc-challenge-8">4.1.1 Challenge</a></li>
</ul></li>
<li><a href="#digitizing-polygons" id="toc-digitizing-polygons">4.2
Digitizing Polygons</a>
<ul>
<li><a href="#challenge-9" id="toc-challenge-9">4.2.1 Challenge</a></li>
</ul></li>
</ul></li>
<li><a href="#concept-introduction-to-openstreetmap"
id="toc-concept-introduction-to-openstreetmap">Concept: Introduction to
OpenStreetMap</a></li>
<li><a href="#geoprocessing" id="toc-geoprocessing">5. Geoprocessing</a>
<ul>
<li><a href="#download-openstreetmap-data"
id="toc-download-openstreetmap-data">5.1 Download OpenStreetMap Data</a>
<ul>
<li><a href="#challenge-10" id="toc-challenge-10">5.1.1
Challenge</a></li>
</ul></li>
<li><a href="#reproject-and-buffer" id="toc-reproject-and-buffer">5.2
Reproject and Buffer</a>
<ul>
<li><a href="#challenge-11" id="toc-challenge-11">5.2.1
Challenge</a></li>
</ul></li>
<li><a href="#calculate-zonal-statistics"
id="toc-calculate-zonal-statistics">5.3 Calculate Zonal Statistics</a>
<ul>
<li><a href="#challenge-12" id="toc-challenge-12">5.3.1
Challenge</a></li>
</ul></li>
</ul></li>
<li><a href="#data-credits" id="toc-data-credits">Data Credits</a></li>
<li><a href="#license" id="toc-license">License</a></li>
</ul>
</div>

<div style="page-break-after: always;"></div>
<hr />
<p><img src="images/spatial_thoughts_logo.png" width="250pt" style="display: block; margin: auto;" /></p>
<hr />
<div style="page-break-after: always;"></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This is an introductory course that covers QGIS from the very basics.
You will learn to use QGIS for mapping, spatial data processing, and
spatial analysis. This class is ideal for participants with a basic
knowledge of GIS and who want to learn how to use QGIS to carry out
everyday GIS tasks.</p>
<p><a
href="https://docs.google.com/presentation/d/1Lw0NQlLQXUSW1Mf1rzy9pLb_m2wxSUHQDxF-vjPTBaU/edit?usp=sharing"
target="_blank"><img
src="images/introduction_to_qgis/course_overview.png" width="400"
alt="View Presentation" /></a></p>
<p><a
href="https://docs.google.com/presentation/d/1Lw0NQlLQXUSW1Mf1rzy9pLb_m2wxSUHQDxF-vjPTBaU/edit?usp=sharing"
target="_blank">View the Presentation ↗</a></p>
</div>
<div id="software" class="section level1">
<h1>Software</h1>
<p>This course requires QGIS LTR version 3.28.x.</p>
<p>Please review <a href="install-qgis-ltr.html">QGIS-LTR Installation
Guide</a> for step-by-step instructions.</p>
</div>
<div id="get-the-data-package" class="section level1">
<h1>Get the Data Package</h1>
<p>The exercises and challenges in this course4 use a variety of
datasets. All the required datasets are supplied in the
<code>introduction_to_qgis.zip</code> file. Unzip this file to a
directory - preferably to the
<code>&lt;home folder&gt;/Downloads/introduction_to_qgis/</code>
folder.</p>
<p>The data package also comes with a <code>solutions</code> folder that
contain model solutions for each section.</p>
<p>Download <a
href="https://drive.google.com/uc?export=download&amp;id=1yBghXaZi9csjbCeQtK_GHtcywdnjfXzG">introduction_to_qgis.zip</a>.</p>
</div>
<div id="configuration-and-setup" class="section level1">
<h1>Configuration and Setup</h1>
<div id="enable-required-toolbars" class="section level2">
<h2>Enable Required Toolbars</h2>
<p>We will be using several toolbars in this course. To ensure you have
the required tools for the exercises, go to <em>View</em> menu, select
<em>Toolbars</em> and ensure that the following toolbars are
checked.</p>
<ul>
<li>Attributes Toolbar</li>
<li>Data Source Manager Toolbar</li>
<li>Digitizing Toolbar</li>
<li>Label Toolbar</li>
<li>Map Navigation Toolbar</li>
<li>Project Toolbar</li>
<li>Selection Toolbar</li>
<li>Snapping Toolbar</li>
</ul>
<p><img src="images/introduction_to_qgis/toolbars.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="install-required-plugins" class="section level2">
<h2>Install Required Plugins</h2>
<p>We will be using the following plugins during the course. Go to From
the <em>Plugins</em> menu, choose <em>Manage and Install Plugins…</em>.
Under the <em>All</em> tab, search for the plugin name and click on the
<em>Install Plugin</em> button to install it.</p>
<ul>
<li>QuickMapServices</li>
<li>QuickOSM</li>
</ul>
<p><img src="images/introduction_to_qgis/plugins1.png" width="75%" style="display: block; margin: auto;" /></p>
<p><img src="images/introduction_to_qgis/plugins2.png" width="75%" style="display: block; margin: auto;" /></p>
<p><img src="images/introduction_to_qgis/plugins3.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="creating-maps" class="section level1">
<h1>1. Creating Maps</h1>
<p>This section is designed to help you get familiar with the basic
workflow of importing data layers, applying symbology, adding labels,
and designing layouts for maps. We will take a text file containing
historical records of earthquakes and turn it into an informative
visualization like the one below.</p>
<p><img src="images/introduction_to_qgis/earthquake_map.png" width="75%" style="display: block; margin: auto;" /></p>
<div id="importing-vector-data" class="section level2">
<h2>1.1 Importing Vector Data</h2>
<ol style="list-style-type: decimal">
<li>Open QGIS. The first step is to import the source datasets. Click on
the <em>Open Data Source Manager</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Select the <em>Vector</em> tab. Click the <em>…</em> button next to
<em>Vector Dataset(s)</em> and browse to the data directory.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Select the <code>ne_10m_land.shp</code> file and click
<em>Open</em>. In the <em>Data Source Manager</em> window, click
<em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>A new layer, <code>ne_10m_land</code> will be added to the
<em>Layers</em> panel and displayed on the Canvas. This layer contains
polygons representing the land areas of the world. Click on the <em>Open
Data Source Manager</em> button again.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Click the <em>…</em> button next to <em>Vector Dataset(s)</em> and
browse to the data directory. Select the
<code>gem_active_faults_harmonized.gpkg</code> file and click
<em>Open</em> followed by <em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>A new layer, <code>gem_active_faults_harmonized</code> will be added
to the <em>Layers</em> panel and displayed on the Canvas. This is a
global layer containing lines representing all the active faults. We
will now import another layer of earthquake points. Click on the
<em>Open Data Source Manager</em> button again.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Select the <em>Delimited Text</em> tab. Click the <em>…</em> button
next to <em>File name</em> and browse to the data directory. Select the
<code>significant_earthquakes_2000_2020.tsv</code> file. This is a text
file in the <em>Tab-Separated Values (TSV) format</em>. In the <em>File
Format</em> section, select <em>Custom delimiters</em>.</li>
</ol>
<blockquote>
<p>Note: Windows users may need to change the <em>File Type</em> as
<strong>All</strong> in <em>Choose a Delimited Text File to Open</em>
dialog to see the TSV file.</p>
</blockquote>
<p><img src="images/introduction_to_qgis/earthquakes_part1_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Check the <em>Tab</em> checkbox. In the <em>Geometry Definition</em>
section, ensure <strong>Longitude</strong> is selected as the <em>X
Field</em> and <strong>Latitude</strong> is selected as the <em>Y
Field</em>. Choose <strong>EPSG:4326</strong> as <em>Geometry CRS</em>.
Leave other options to their default values and click <em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>A new layer, <code>significant_earthquakes_2000_2020</code> will be
added to the <em>Layers</em> panel and displayed on the Canvas. This
layer contains over 1000 records of significant earthquakes recorded
between 2000 and 2020. Right-click on the
<code>significant_earthquakes_2000_2020</code> layer and select <em>Open
Attribute Table</em>. Examine all the attributes and their values.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>We will now learn about some of the tools to query and select
records. From the <em>Selection Toolbar</em>, click the <em>Select
Features by Value…</em> button.</li>
</ol>
<blockquote>
<p>Note: If the selection toolbar is not enabled, right-click on the
toolbar panel and check <strong>Selection Toolbar</strong>.</p>
</blockquote>
<p><img src="images/introduction_to_qgis/earthquakes_part1_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>In the <em>Select Features</em> dialog, enter <strong>2020</strong>
as the <em>Year</em> and click the <em>Select Features</em> button. You
will see all earthquakes that occurred during 2020 will be highlighted
in yellow. You may also click the <em>Flash Features</em> button to see
the selected records blink.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>Let’s refine the query a little more. Enter <strong>7</strong> as
the <em>Mag</em> parameter and set the criteria as <em>Greater than
(&gt;)</em>. Click <em>Select Features</em>. You will now see only those
points where the earthquake occurred in 2020, and its magnitude was
greater than 7. Close the window.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_12.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>Right-click on the <code>significant_earthquakes_2000_2020</code>
layer and select <em>Open Attribute Table</em>. You will see that there
are 6 selected features in the layer. If you want to examine their
attributes, there is a handy shortcut. Click the <em>Move selection to
top</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>All the selected rows will be displayed on the top of the attribute
table - making it easy to examine the selected features. Click the
<em>Deselect all features from the layer</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_14.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="15" style="list-style-type: decimal">
<li>For our map, we need another layer of 10 largest earthquakes - so we
can style it differently than other earthquakes. For our visualization,
we will define the largest earthquakes like the ones that resulted in
the highest number of deaths. Locate the <em>Total Deaths</em> attribute
and click twice on the column header. This will sort the features in
descending order of the values in this column.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_15.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="16" style="list-style-type: decimal">
<li>Hold the <em>Shift</em> key and select the first 10 rows. This
selection will be the 10 earthquakes with the high fatalities.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_16.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="17" style="list-style-type: decimal">
<li>We will save the selected 10 features as a new layer. Right-click
the <code>significant_earthquakes_2000_2020</code> layer and go to
<em>Export → Save Selected Features As..</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_17.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="18" style="list-style-type: decimal">
<li>Select <strong>GeoPackage</strong> as the <em>Format</em>. Click the
<em>…</em> button next to <em>File name</em> and browse to the data
directory. Name the layer as <code>large_earthquakes.gpkg</code>. Click
<em>Save</em>. Click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_18.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="19" style="list-style-type: decimal">
<li>A new layer, <code>large_earthquakes</code> will be added to the
<em>Layers</em> panel.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_19.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="20" style="list-style-type: decimal">
<li>Our data preparation is now complete. Let’s save our work. Go to
<em>Project → Save</em>. Browse to the data directory and enter the name
as <strong>Earthquakes</strong>. Click <em>Save</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_20.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="21" style="list-style-type: decimal">
<li>The project will be saved in the <em>QGZ</em> format as a file.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part1_21.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finished the first part of this exercise. Your output
should match the contents of the
<code>Earthquakes_Checkpoint1.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge" class="section level3">
<h3>1.1.1 Challenge</h3>
<p>Do you know about <a
href="https://en.wikipedia.org/wiki/Null_Island">Null Island</a>? The
<code>ne_10m_land</code> contains a polygon for this feature. Locate
this polygon on the map.</p>
<p>Hint: Open the attribute table, find and select the feature for Null
island. Then use the <em>Zoom map to the selected rows</em> button.</p>
</div>
</div>
<div id="symbology" class="section level2">
<h2>1.2 Symbology</h2>
<p>The symbology of a layer is its visual appearance on the map. We will
now learn different techniques for styling each layer to convey the
information visually.</p>
<ol style="list-style-type: decimal">
<li>Select the <code>ne_10m_land</code> layer and click <em>Open the
Layer Styling Panel</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>We will style this layer with a simple grey color. Click <em>Simple
Fill</em> to reveal more options. Click the dropdown next to <em>Fill
color</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Use the color picker to select a light shade of grey color. The
<em>Layer Styling Panel</em> is interactive, so you can immediately
preview your styling changes in the map canvas.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Similarly, change the <em>Stroke color</em> to white.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Next, we will style the faults layer. Select
<code>gem_active_faults_harmonized</code> layer in the <em>Layers</em>
panel. Click the <em>Simple Line</em> symbol to reveal more styling
options. Change the <em>Color</em> to a shade of brown. Set the
<em>Stroke width</em> to <strong>0.1</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Now we will change the style of the earthquake points. Select the
<code>significant_earhtquakes_2000_2020</code> layer. Click the
<em>Simple Marker</em> symbol. Change the <em>Size</em> option to
<strong>0.7</strong> <em>Millimeters</em>. Select red as the <em>Fill
color</em> and white as the <em>Stroke color</em>. Change the <em>Stroke
width</em> to <strong>0.1</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>We have now styled the three background layers. We will style the
<code>large_earthquakes</code> layer, which features the main
information we want to convey through this map. We will use a
<em>Proportional Circle</em> style and have the size of the circle
represent the total fatalities caused by the respective earthquake.
Click <em>Simple Marker</em> to see more styling options. Click the
<em>Data defined override</em> button next to <em>Size</em> and choose
<strong>Assistant</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>In the <em>Input</em> section, select <strong>Total Deaths</strong>
as the <em>Source</em>. Set the range of <em>Values from</em>
<strong>5000</strong> <em>to</em> <strong>500000</strong>. In the
<em>Output</em> section, set the range of <em>Size from</em>
<strong>3</strong> <em>to</em> <strong>10</strong>. This will use the
attribute value in the <em>Total Deaths</em> field to set the size of
the circles. Click the <em>Go Back</em> button at the top of the panel
to return to the previous menu.</li>
</ol>
<blockquote>
<p>The default <em>Scale method</em> used by QGIS is
<strong>Flannery</strong>. This method applies a non-linear scaling to
compensate for human perception of areas. <a
href="https://makingmaps.net/2007/08/28/perceptual-scaling-of-map-symbols/"
target="_blank">Learn more. ↗</a></p>
</blockquote>
<p><img src="images/introduction_to_qgis/earthquakes_part2_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Click the <em>Fill color</em> and adjust the transparency. This will
help show the information under the large circles.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>Set the <em>Stroke color</em> to white.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>The circles represent the number of deaths caused by each
earthquake. But the reader of our map will not know what these sizes
represent. It would help interpret the map better if we had a legend.
Let’s set a legend for this layer. Click the <em>Marker</em> symbol. At
the bottom of the panel, select <em>Advanced → Data-defined Size
Legend</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>Choose the <em>Collapsed legend</em> option. Check the <em>Manual
size classes</em> option. Click the <em>+</em> button to add the class
definition manually.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_12.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>Set three different size classes for <strong>5000</strong>,
<strong>50000</strong> and <strong>500000</strong>. You will see a
legend in the <em>Layers</em> panel showing the circle sizes and
corresponding fatality values.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>Click the <em>Save Project</em> button to save your work.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part2_14.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finish the second part of this exercise. Your output
should match the contents of the
<code>Earthquakes_Checkpoint2.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge-1" class="section level3">
<h3>1.2.1 Challenge</h3>
<p>QGIS has many rich cartography features. One of my favorites is
called <em>Live Layer Effects</em>. This allows you to add effects such
as <em>Outer Glow</em>, <em>Drop Shadow</em>, etc., to each symbol. This
takes your symbology to the next level and helps highlight certain
features. Select the <code>large_earthquakes</code> layer and open the
<em>Layer Styling Panel</em>. Expand the <em>Layer Rendering</em>
section and enable <em>Draw effects</em>. Click the <em>Customize
effects</em> button and add a drop shadow effect to the layer.</p>
<p><img src="images/introduction_to_qgis/earthquakes_part2_challenge.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="labelling" class="section level2">
<h2>1.3 Labelling</h2>
<p>Labels are a useful way to convey additional information for any
features. Labels are associated with each feature and can be configured
to show information from the attributes. We will now add labels to each
of the large earthquake points to show the name of the location as well
as the deaths caused due to that earthquake.</p>
<ol style="list-style-type: decimal">
<li>Before we proceed further, let’s change the projection of our map to
a more appropriate one. The preferred and modern choice for global maps
is the <a href="http://equal-earth.com/">Equal Earth</a> projection. It
is much more visually appealing and also preserves relative areas of
continents. Go to <em>Project → Properties…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Switch to the <em>CRS</em> tab. Search <em>8857</em> and select the
<strong>WGS84 / Equal Earth Greenwich</strong> CRS. Click
<em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Back in the QGIS Window, you will notice that the shape of the map
looks different now. The bottom-right corner also displayed the current
project CRS <em>EPSG:8857</em>. Select the
<code>large_earthquakes</code> layer and open the <em>Layer Styling
Panel</em>. Switch to the <em>Labels</em> tab.</li>
</ol>
<blockquote>
<p>Note: Changing the Project CRS does not change the CRS of the layers,
but reprojects them on-the-fly to the chosen CRS for display.</p>
</blockquote>
<p><img src="images/introduction_to_qgis/earthquakes_part3_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Select <em>Single Labels</em>. We will combine the values from
multiple attributes for the label using an expression. Click the
<em>Expression</em> button next to <em>Value</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Locate the <strong>Location Name</strong> attribute under <em>Fields
and Values</em> group. Double-click to add it to the expression. You can
check the <em>Preview</em> at the bottom to see the result of the
expression.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>We will create a longer label text by combining multiple attributes.
You can use the <strong>||</strong> operator in the QGIS expression to
concatenate strings. Create the expression as shown below. Click
<em>OK</em>.</li>
</ol>
<pre><code>&quot;Location Name&quot; ||  &#39;;&#39; || &#39;Deaths:&#39; || &quot;Total Deaths&quot;</code></pre>
<p><img src="images/introduction_to_qgis/earthquakes_part3_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>The labels will be rendered next to the points on the canvas. Select
the <em>Formatting</em> tab. At the bottom, enter <strong>;</strong> as
the value for <em>Wrap on character</em> and <strong>20</strong>
characters as the value for <em>Wrap lines to</em>. This will break the
labels into multiple lines and make them readable.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Next, we will change the appearance of the label text. Switch to the
<em>Text</em> tab. Change the <em>Size</em> to <strong>8</strong> and
set the <em>Color</em> to white.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>A useful labeling technique is to add a background to the labels to
improve legibility. Switch to the <em>Background</em> tab and enable
<em>Draw background</em>. Set the <em>Color</em> to black. Also, set the
<em>Size X</em> and <em>Size Y</em> of <em>Buffer</em> to be
<strong>1</strong> point. At the bottom, set the <em>Radius X,Y</em> to
<strong>5</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>To attach the labels to each symbol, you can use a leader line.
Switch to the <em>Callouts</em> tab and check <em>Draw
callouts</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>As we have only a few labels, we can adjust their placement manually
to fit the layout better. Close the <em>Layer Styling Panel</em>.
Right-click anywhere on the <em>Toolbar</em> are and select the
<em>Label Toolbar</em> to activate it.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>Once the <em>Label Toolbar</em> is activated, you will see new
tools. Select the <em>Move a Label, Diagram, or Callout</em> tool.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_12.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>Click on any of the labels. The first time you do this, you will be
prompted with an <em>Auxiliary Storage: Choose Primary Key</em> dialog.
This is used to store the position of the labels for each label. You can
choose any field containing unique values. In our case, the default
value <strong>fid</strong> is fine. Click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>Click on the label again to start moving it. Drag your mouse to the
new label location and click again to move the label.</li>
</ol>
<blockquote>
<p>Tip: If a label disappears after moving it, it means that it has been
placed at a position that cannot be displayed on the map without
colliding with other labels. You can see the unplaced labels by clicking
the <em>Toggle Display of Unplaced Labels</em> button on the <em>Label
Toolbar</em>. Once the label is shown, you can move it to another spot
where it can be displayed.</p>
</blockquote>
<p><img src="images/introduction_to_qgis/earthquakes_part3_14.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="15" style="list-style-type: decimal">
<li>Similarly, move other labels to appropriate locations. Once you are
satisfied, save your work.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part3_15.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finished the third part of this exercise. Your output
should match the contents of the
<code>Earthquakes_Checkpoint3.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge-2" class="section level3">
<h3>1.3.1 Challenge</h3>
<p>The numbers displayed in the labels can be hard to read since they
are not formatted. We can make them readable by adding a
thousand-separator. So a number such as <em>227899</em> is displayed as
<em>227,899</em> and a number like <em>5749</em> as <em>5,749</em>.
Update the expression for the labels, so the numbers are formatted. To
achieve this, you can use the <code>format_number()</code> function in
the QGIS expression editor.</p>
</div>
</div>
<div id="print-layout" class="section level2">
<h2>1.4 Print Layout</h2>
<p>QGIS comes with a rich set of tools to create map layouts that allow
you to add elements such as labels, images, legend, scale bar, north
arrow, etc., to your map. It also allows you to export the map layout as
an image or a PDF. We will now take the visualization created in the
QGIS map canvas and create a print layout. 1. Go to <em>Project → New
Print Layout…</em>.</p>
<p><img src="images/introduction_to_qgis/earthquakes_part4_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>You will be prompted by a <em>Create Print Layout</em> dialog asking
you to <em>Enter a unique print layout title</em>. You can leave it
blank and click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>A new window will open with the title <em>Layout 1</em>. First,
let’s set the page size. Right-click on the canvas and select <em>Page
Properties…</em>. Select <em>Size</em> as <strong>A4</strong> and
<em>Orientation</em> as <strong>Landscape</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Next, go to <em>Add Item → Add Map</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Hold the left mouse button and select the canvas part where you want
the map to appear. We will use the full width for the map but leave some
space at the top for a title and at the bottom for additional
information.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>The map will be rendered at the chosen location. You can adjust the
scale to make the map fit the area and enter <strong>120000000</strong>
as the value for <em>Scale</em>. You can also select the
<em>Interactively Edit Map Extent</em> button and click on the map to
move it.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Once you are satisfied with the map view, go to <em>Add Item → Add
Label</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Drag a rectangle at the top. On the right-hand side <em>Item
Properties</em> panel, enter <strong>10 Largest Earthquakes
(2000-2020)</strong> as the text. Click on the <em>Font</em> button
under <em>Appearance</em> and set the <em>Font Size</em> to
<strong>24</strong>. You can also center align the label by selecting
<strong>Center</strong> as the <em>Horizontal alignment</em> and
<strong>Middle</strong> as the <em>Vertical Alignment</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>We will now add a legend to the map. Go to <em>Add Item → Add
Legend</em>. Draw a rectangle at an empty region on the map.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>Once the legend is added, un-check the <em>Auto update</em> box.
This will allow us to customize the items in the legend. Select the
<code>ne_10m_land</code> layer and click the <em>Remove selected item(s)
from legend</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>You can also edit the layer name to be more suitable for the map.
Select the <code>gem_active_faults_harmonized</code> layer and click the
<em>Edit selected item properties</em> button. Change the name of the
layer to <code>Faults</code>. Similarly, change the
<code>large_earthquakes</code> layer name to <code>Deaths</code>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>Select the <code>Total Deaths</code> layer and click <em>Remove
selected item(s) from legend</em>. The legend now contains only the
items that are easy to interpret and add context to the symbols on the
map.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_12.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>You can also add a border to all the elements by enabling the
<em>Frame</em> under the respective <em>Item Properties</em>. Next, we
will add some logos to the map. Go to <em>Add Item → Add
Picture</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>Add the picture to the bottom-right corner. Locate the <em>App
Symbols → logos</em> folder in the <em>Item Properties</em> panel.
Select the <strong>Made with QGIS</strong> logo. You can also add your
organization’s logo by browsing an SVG/PNG file on your computer.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_14.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="15" style="list-style-type: decimal">
<li>A good practice is to credit the data sources used to create the
map. This can be added using <em>Add Item → Add Label</em>. Once you are
satisfied with the layout, you can export it. Go to <em>Layout → Export
as Image…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_15.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="16" style="list-style-type: decimal">
<li>Browse to the data folder and enter the name of the image as
<strong>large_earthquakes.png</strong>. Click <em>Save</em>. You will be
prompted to choose <em>Image Export Options</em>. Leave the settings to
default and click <em>Save</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_16.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="17" style="list-style-type: decimal">
<li>The layout will be saved as a static image. You can embed this image
in a report, presentation, or share it on social media.</li>
</ol>
<p><img src="images/introduction_to_qgis/earthquakes_part4_17.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We come to the end of this exercise. Your output should match the
contents of the <code>Earthquakes_Checkpoint4.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge-3" class="section level3">
<h3>1.4.1 Challenge</h3>
<p>Export your layout as a PDF.</p>
<p>Hint: The <em>PDF Export Options</em> dialog has an option
<em>Simplify geometries to reduce output file size</em> at the bottom.
While useful, this can have unexpected effect on the output. Un-check it
while doing the export.</p>
<div class="figure" style="text-align: center">
<img src="images/introduction_to_qgis/earthquakes_part4_challenge.png" alt="Print Layout Exported as a PDF" width="75%" />
<p class="caption">
Print Layout Exported as a PDF
</p>
</div>
</div>
</div>
</div>
<div id="concept-joins-and-data-normalization" class="section level1">
<h1>Concept: Joins and Data Normalization</h1>
<p><a
href="https://docs.google.com/presentation/d/1YJfWrjSDeriYJMsA6bmVi4zZmzLmGOo5dm13Lr5JaiI/edit?usp=sharing"
target="_blank"><img
src="images/introduction_to_qgis/joins_presentation.png" width="400"
alt="View Presentation" /></a></p>
<p><a
href="https://docs.google.com/presentation/d/1YJfWrjSDeriYJMsA6bmVi4zZmzLmGOo5dm13Lr5JaiI/edit?usp=sharing"
target="_blank">View the Presentation ↗</a></p>
</div>
<div id="visualizing-spatial-data" class="section level1">
<h1>2. Visualizing Spatial Data</h1>
<p>In this section, we will learn basic data processing and
visualization techniques. We will use geographic boundaries and
population count data for the City of New York and create a population
density map. This requires doing a table join and using a graduated
symbology to create a choropleth map.</p>
<div id="table-join" class="section level2">
<h2>2.1 Table Join</h2>
<ol style="list-style-type: decimal">
<li>Open QGIS. The first step is to import the source datasets. Click on
the <em>Open Data Source Manager</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Select the <em>Vector</em> tab. Click the <em>…</em> button next to
<em>Vector Dataset(s)</em> and browse to the data directory. Select the
<code>nynta2010.shp</code> file and click <em>Open</em>. In the <em>Data
Source Manager</em> window, click <em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>You may be prompted to <em>Select Transformation for nynta2010</em>.
The source shapefile is in the
<code>EPSG:2263 NAD83 / New York Long Island (ftUS)</code> projection
whereas the default projection in QGIS is
<code>EPSG:4326 - WGS84</code>. This dialog presents several
transformations to convert between the coordinates between these
projections. Choose the first option and click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>A new layer <code>nyta2010</code> will be added to the
<em>Layers</em> panel and will be displayed on the Canvas. This layer
contains polygons representing the <em>Neighborhood Tabulation Areas
(NTAs)</em> for New York city. Right-click on the <code>nyta2010</code>
layer and select <em>Open Attribute Table</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Examine the attributes of the layer. The <code>NTACode</code> field
contains a unique identifier for each polygon. Notice that we do not
have any population or demographic attributes in this layer.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>The population and other demographic datasets are typically
distributed as tables. These tables would have the same unique
identifier as the shapefile that can be used to merge the relevant
fields to the vector layer. Let’s import a table representing <em>New
York City Population By Neighborhood Tabulation Areas</em>. Click on the
<em>Open Data Source Manager</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Switch to the <em>Delimited Text</em> tab. Browse to the
<code>New_York_City_Population_By_Neighborhood_Tabulation_Areas.csv</code>
file and select it. Since this CSV file is just tabular data, select
<em>No geometry (attribute only table)</em> option and click
<em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Once the new tabular layer
<code>New_York_City_Population_By_Neighborhood_Tabulation_Areas</code>
is added to the <em>Layers</em> panel, right-click on it and select
<em>Open Attribute Table</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>This table has a <strong>Population</strong> column with the
population for each of the tabulation areas. We also have the
<strong>NTA Code</strong> column containing the same codes as our
<code>nynta2020</code> layer. We can use this column to join this table
with the vector layer.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>If you double-click the <em>NTA Code</em> column to sort the table
by the code, you will notice that each neighborhood has 2 records of
population. For this exercise, we want to use the population for the
year 2010. We will apply a filter to select only the population records
for 2010.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>In the main QGIS window, right-click the
<code>New_York_City_Population_By_Neighborhood_Tabulation_Areas</code>
layer and select <em>Filter</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>In the <em>Query Builder</em> dialog, enter the filter expression as
below. You can also double-click the column name to insert them in the
expression. Click <em>OK</em>.</li>
</ol>
<pre><code>&quot;Year&quot; = 2010</code></pre>
<p><img src="images/introduction_to_qgis/population_part1_12.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>Now we will do the table join. Open <strong>Processing →
Toolbox</strong> from the main menu at the top.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>Search and locate the algorithm <strong>Vector general → Join
attributes by field value</strong> and double-click to launch it.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_14.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="15" style="list-style-type: decimal">
<li>In the <em>Join Attributes by Field Value</em> dialog, select
<code>nynta2010</code> as the <em>Input layer</em> and
<code>NTACode</code> as the <em>Table field</em>. Select
<code>New_York_City_Population_By_Neighborhood_Tabulation_Areas</code>
as the <em>Input layer 2</em> and <code>NTA Code</code> as the <em>Table
field 2</em>. Click the <em>…</em> button next to <em>Layer 2 fields to
copy</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_15.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="16" style="list-style-type: decimal">
<li>We want to copy only the population data, so select the
<code>Population</code> field and click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_16.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="17" style="list-style-type: decimal">
<li>Next, we need to configure the output. Click the <em>…</em> button
next to <em>Joined layer</em> and select <em>Save to File…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_17.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="18" style="list-style-type: decimal">
<li>Browse to the data directory and name the output as
<code>nynta_with_population</code>. Make sure the file type is selected
as <em>GPKG files (*.gpkg)</em>. Click <em>Save</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_18.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="19" style="list-style-type: decimal">
<li>Once the configuration is complete, click the <em>Run</em>
button.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_19.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="20" style="list-style-type: decimal">
<li>Upon completion of processing, a new layer
<code>nynta_with_population</code> will be added to the <em>Layers</em>
panel. Right-click the layer and select <em>Open Attribute Table</em>.
You will see that we now have an additional column
<strong>Population</strong> in the attribute table. The table also has a
column <strong>Shape_Area</strong> containing the area of each polygon
in Sq.Ft.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_20.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="21" style="list-style-type: decimal">
<li>Our goal is to map the population density. We can use the population
count and area columns and calculate a new column for population
density. From the Processing Toolbox, search and locate the algorithm
<strong>Vector table → Field Calculator</strong> and double-click to
launch it.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_21.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="22" style="list-style-type: decimal">
<li>In the <em>Field Calculator</em> dialog, enter <code>Density</code>
as the <em>Field Name</em>. We will now build the expression to
calculate population density. From the function groups next to the
<em>Expression</em> panel, expand the <em>Fields and Values</em>
section. Double-click the <code>Population</code> field to add it to the
expression editor. Note that fields are referred using double-quotes (“)
in QGIS.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_22.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="23" style="list-style-type: decimal">
<li>Select the <strong>/</strong> button to enter the division operator
and then click the <code>Shape_Area</code> field to enter it. You may
also type the expression instead of picking the values from the dialog.
The final expression should look like below.</li>
</ol>
<pre><code>&quot;Population&quot; / &quot;Shape_area&quot;</code></pre>
<p><img src="images/introduction_to_qgis/population_part1_23.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="24" style="list-style-type: decimal">
<li>This will give us the population density in persons per square feet.
A more appropriate unit for population density is persons per square
miles. Let’s convert the value to miles using the conversion factor or
<em>1 mile = 5280 ft</em>. Change the expression as shown below. Once
done, select <em>Save to File</em>.</li>
</ol>
<pre><code>5280 * 5280 * (&quot;Population&quot; / &quot;Shape_area&quot;)</code></pre>
<p><img src="images/introduction_to_qgis/population_part1_24.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="25" style="list-style-type: decimal">
<li>Name the output as <code>nynta_population_density.gpkg</code> and
click <em>Run</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_25.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="26" style="list-style-type: decimal">
<li>Once the processing finishes as new layer
<code>nynta_population_density</code> will be added to the
<em>Layers</em> panel. Open the attribute table and verify that you have
a new column named <em>Density</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_26.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="27" style="list-style-type: decimal">
<li>We don’t need the other layers in our project. Hold the
<em>Shift</em> key and select all layers except
<code>nynta_population_density</code>. Right-click and select <em>Remove
Layer…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_27.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="28" style="list-style-type: decimal">
<li>Let’s save our work so we can retrieve it later. Go to
<strong>Project → Save</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_28.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="29" style="list-style-type: decimal">
<li>Save the project as <code>NYC_Population_Density</code> and click
<em>Save</em>. QGIS will save the project file in the <em>QGZ</em>
format.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part1_29.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finish the first part of this exercise. Your output
should match the contents of the
<code>NYC_Population_Density_Checkpoint1.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge-4" class="section level3">
<h3>2.1.1 Challenge</h3>
<p>Round the population density values to the nearest integer and store
them in another column named <strong>Density_Round</strong>.</p>
<ul>
<li>Hint1: Use the <em>Field Calculator</em> algorithm from the
processing toolbox.</li>
<li>Hint2: The QGIS expression engine has a function named
<code>round()</code> that can round a fraction to the chosen number of
decimal places.</li>
</ul>
</div>
</div>
<div id="creating-a-choropleth-map" class="section level2">
<h2>2.2 Creating a Choropleth Map</h2>
<ol style="list-style-type: decimal">
<li>Continuing the exercise, we will now visualize the spatial
distribution of population density in form of a choropleth map. From the
<em>Layers</em> panel, click the <em>Open the Layer Styling panel</em>
button.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Select the <code>Graduated</code> renderer.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>As we want to map the population density, choose
<code>Density</code> as the <em>Value</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Next we select a color ramp. Click the drop-down button next to
<em>Color Ramp</em>, select <em>All Color Ramps</em> and pick the
<code>YlOrBr</code> (Yellow-Orange-Brown) ramp.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Change the <em>Classes</em> value to <code>6</code> and click
<em>Classify</em>. You will see each polygon colored according to the
population density attribute.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>The default mode of classification is <em>Quantile</em> - which
divides the input data such that all 6 classes have approximately equal
number of features. There are other modes of classification as well. You
can learn more about Data Classification Modes in the <a
href="https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/vector_properties.html?#graduated-renderer">QGIS
Documentation</a>. We can also define custom data ranges for each class.
Click on the <em>Values</em> column for the first row in the
classification table. Change the <em>Upper value</em> to
<code>20000</code>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Similarly change other class ranges so they become easy to
interpret. The last row contains the upper value to the maximum value in
the dataset. Instead of displaying the maximum value, we can update the
label. Click the <em>Legend</em> column for the last row.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Change the label to <code>&gt; 100000</code>.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Now you have an informative visualization of population density in
New York city with an easy to interpret legend. Click the <em>Save</em>
button to save your work. All your visualization settings are saved
along with the project, so next time when you load this project in QGIS,
you will see the same visualization.</li>
</ol>
<p><img src="images/introduction_to_qgis/population_part2_9.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finish the second part of this exercise. Your output
should match the contents of the
<code>NYC_Population_Density_Checkpoint2.qgz</code> file in the
<code>solutions</code> folder.</p>
<div id="challenge-5" class="section level3">
<h3>2.2.1 Challenge</h3>
<p>Create a new layer containing all the neighborhood tabulation areas
having a population density &gt; 100000.</p>
<p>Hint: You can use the <em>Extract by Attribute</em> algorithm from
the Processing Toolbox.</p>
</div>
</div>
</div>
<div id="assignment" class="section level1">
<h1>Assignment</h1>
<p>The following assignment is designed to help you practice the skills
learnt so far in the course and explore the Print Layout.</p>
<p>Your task is to design a map of <em>Population Density of New York
City</em> in QGIS Print Layout. You can take the choropleth map created
in the previous section <a href="#creating-a-choropleth-map">2.2 Create
a Choropleth Map</a> and design a map in the Print Layout. In addition
to the rendered vector layer, the map must have at least the following
elements:</p>
<ul>
<li>Scale Bar</li>
<li>Legend</li>
<li>Data Attribution</li>
</ul>
<p>You may also optionally add other elements such a north arrow, logos
etc. Feel free to use your creativity to customize the style and map
layout. Below is an example map for inspiration.</p>
<div class="figure" style="text-align: center">
<img src="images/introduction_to_qgis/assignment.png" alt="Example Map Design for Assignment" width="60%" />
<p class="caption">
Example Map Design for Assignment
</p>
</div>
</div>
<div id="georeferencing" class="section level1">
<h1>3. Georeferencing</h1>
<p>Georeferencing is the process of assigning real-world coordinates to
each pixel of the raster. This is an important step in preparing your
data for further analysis. Many projects, particularly machine learning
projects - need continuous historic records to build a model. Many of
the older datasets may come in form of scanned maps or aerial photos
that needs to be georeferenced. Similarly, some organizations may only
share a PDF or a static map image of the dataset which will need to be
converted into a GIS-ready format using georeferencing process.</p>
<p>Georeferencing process involves collecting GCPs (Ground Control
Points) or Tie-Points. These GCPs are easily identifiable features in
the image or map whose real-world coordinates are obtained from
field-survey using a GPS device or identified from already georeferenced
sources within a GIS.</p>
<p>In this exercise, you’re going to georeference an old scanned map of
Bangalore, India created in 1924. This map is possibly hand-drawn and
has no coordinate markings, so we will use a tiled basemap layer to
locate the features and obtain the GCPs.</p>
<div id="using-basemaps" class="section level2">
<h2>3.1 Using Basemaps</h2>
<ol style="list-style-type: decimal">
<li>Open QGIS. We will use a plugin called
<strong>QuickMapServices</strong> to load a basemap. From the
<em>Plugins</em> menu choose <em>Manage and Install Plugins…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>The <em>Plugins</em> dialog contains all the available plugins in
QGIS. Under the <em>All</em> tab, search for
<strong>quickmapservices</strong>. It has different basemaps that can be
used based on your purpose. Click on the <em>Install Plugin</em>, to add
this plugin to QGIS.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Once installed, check the box next to the <em>QuickMapServices</em>
label to enable it. Click <em>Close</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Now you will see a new <em>Web</em> menu added to the menu-bar. Go
to <em>Web → QuickMapServices</em> menu. You will see some map providers
and available basemaps. We can enable a few more providers to have many
more options. Click on the <em>Web → QuickMapServices →
Settings</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>In the <em>Settings</em> dialog, switch to the <em>More
services</em> tab. Click on the <code>Get contributed pack</code> to
download 3rd-party basemaps.</li>
</ol>
<blockquote>
<p>You will see a warning against using contributed services. Some of
these services may have restrictions on their usage and/or attribution
requirement that you need to follow. Please review them before using
them in your project.</p>
</blockquote>
<p><img src="images/introduction_to_qgis/georef_part1_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Once the new services are added, you will see many more options in
the <em>Web → QuickMapServices</em> menu.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>For our current task, we will use a basemap based on OpenStreetMap
data. Since we need to locate the features in the scanned maps let’s add
the <em>OSM Standard</em>. Click on the <strong>Web → QuickMapServices →
OSM → OSM Standard</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Now in the canvas, the basemap will be loaded. This map is
georeferenced and projected in <strong>EPSG:3857</strong> CRS. This
information can be viewed on the bottom-right of the QGIS, where the
project CRS will be updated.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part1_8.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now finished the first part of this exercise. Your output
should match the contents of the
<code>Georeferencing_Checkpoint1.qgz</code> file in the solutions
folder.</p>
<div id="challenge-6" class="section level3">
<h3>3.1.1 Challenge</h3>
<p>Load the <strong>Stamen Watercolor</strong> basemap by <a
href="https://wiki.openstreetmap.org/wiki/Stamen">Stamen</a>. This is an
award-winning basemap that renders OpenStreetMap data in a hand-painted
watercolor style.</p>
</div>
</div>
<div id="using-the-georeferencer" class="section level2">
<h2>3.2 Using the Georeferencer</h2>
<p>In this section, you will learn how to load a scanned image, collect
GCPs (ground control points) and warp the image to create a GeoTiff
file.</p>
<ol style="list-style-type: decimal">
<li>Click on the <strong>Layer → Georeferencer</strong> from the
menu-bar to open the georeferencing tool.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>A new <em>Georeferencer</em> window will open. This tool primarily
contains two sections, the top is for viewing images, and the bottom is
for tabular data.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Click on the <strong>Open Raster..</strong> button from the ribbon
to load the scanned map. Browse to the <code>Bangalore_1924.png</code>
file in your data package and click <em>open</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>The image will be loaded in the <em>Georeferencer</em> window. The
ribbon at the top has buttons essential operations like Zoom/Pan that
you can use to navigate around the image. There are also buttons for
adding and editing GCPs (Ground Control Points) that we will use
next.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Before we start collecting GCPs, you may also dock the
<em>Georeferencer</em> window to the main QGIS window. This makes it
easier to find the tie-points. Close the <em>GCP table</em> window.
Click and drag the georeferencer title bar to the bottom of the
canvas.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Locate a feature that is visible in both the scanned map and the
basemap. Click on the <em>Add Point</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>The <em>Enter Map Coordinates</em> dialog will appear. Click on the
<em>From Map Canvas</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Click on the QGIS main canvas at the visible feature on the basemap.
This will fill the coordinates of that point in the CRS of the basemap.
Click <em>OK</em> to close the dialog.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Similarly, go ahead and find more GCPs. The best features to look
for are rail and road intersections, building corners, city squares, or
any other corners and edges. Depending on the method to transform type
you would use, you need a minimum different number of points. For this
exercise, we will be using a <em>Polynomial</em> transformation which
requires a minimum of 6 GCPs. Learn more about <a
href="https://docs.qgis.org/testing/en/docs/user_manual/working_with_raster/georeferencer.html?#available-transformation-algorithms">Transformation
Algorithms</a> in the QGIS Documentation.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>Let’s view the points in a tabular format. If you had docked the
window, click on the pop-out button in Georeferencing window to detach
this tool from the main QGIS. Go to <strong>View → Panels → GCP
table</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>The <em>GCP table</em> dialog will display the details of each
point. Click on the <em>Transformation Settings…</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>In the <em>Transformation Settings</em> dialog, choose
<strong>Polynomial 2</strong> as <em>Transformation type</em>. Choose
<strong>Nearest Neighbour</strong> as <em>Resampling method</em> and
<em>EPSG:3857</em> as <em>Target SRS</em>. Click on the <em>…</em> in
<em>Output raster</em> and save the file as
<code>Banglore_1924_modified.tif</code>. Choose <em>LZW</em> in
<em>Compression</em>. Finally, check the <em>Save GCP points</em> and
<em>Load in QGIS when done</em> boxes. Click <em>OK</em> to save this
setting and close the settings dialog.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_12.png" width="60%" style="display: block; margin: auto;" /></p>
<ol start="13" style="list-style-type: decimal">
<li>Note the <em>Residual (pixels)</em> columns will not display the
error for each GCPs based on the chosen transformation algorithm. Lower
error means the transformation would be able to accurately assign the
chosen coordinate to the pixel.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_13.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="14" style="list-style-type: decimal">
<li>If you have a GCP with high residual, you can use the <em>Move
point</em> to adjust the point’s position or <em>Delete point</em> to
remove it. Before georeferencing, a minimum of six GCPs should be
available.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_14.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="15" style="list-style-type: decimal">
<li>Repeat this process till you are satisfied with the the total mean
error and the residuals.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_15.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="16" style="list-style-type: decimal">
<li>Click on the <em>Start Georeferencing</em> button to georeference
the scanned map.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_16.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="17" style="list-style-type: decimal">
<li>In the main QGIS canvas, the georeferenced layer
<code>Banglore_1924_modified</code> will be added and overlayed on the
basemap.</li>
</ol>
<p><img src="images/introduction_to_qgis/georef_part2_17.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now completed all steps and you should have a georeferenced
image.Your output should match the contents of the
<code>Georeferencing_Checkpoint2.qgz</code> file in the solutions
folder. We have also provided the saved GCPs in the solutions folder. To
load them, you can go to <em>File → Load GCP Points..</em> and select
the <code>bangalore_gcp.points</code> file in the
<code>solutions/</code> folder of the data package.</p>
<p><img src="images/introduction_to_qgis/load_gcps.png" width="75%" style="display: block; margin: auto;" /></p>
<div id="challenge-7" class="section level3">
<h3>3.2.1 Challenge</h3>
<p>In this exercise we used the <strong>Polynomial 2</strong> technique.
For datasets that require more aggressive transformation, you can use
the <a href="https://en.wikipedia.org/wiki/Thin_plate_spline">Thin Plate
Spline</a> algorithm. This method is also known as <em>Rubber
Sheeting</em>. Change the transformation setting to use <strong>Thin
Plate Split</strong> and run the georeferencer again. Compare the output
with the previous result.</p>
</div>
</div>
</div>
<div id="data-editing" class="section level1">
<h1>4. Data Editing</h1>
<p>Many GIS tasks require editing existing data layers or creating new
datasets. Often a large amount of GIS time is spent digitizing raster
data to create vector layers that you use in your analysis. Many machine
learning projects also require creating a labeled dataset that needs to
be made by digitizing features from satellite imagery or historical
maps. QGIS has powerful on-screen digitizing and editing capabilities
that we will explore in this tutorial.</p>
<p>In this exercise, you will create a vector layer of historic lakes in
the city of Bangalore, India. This city has experienced urbanization at
a rapid pace. Due to this, many water bodies have been lost. We will use
the georeferenced scanned map from the previous exercise to digitize
polygons for all the water bodies in 1924 and label their current
status. Finally, we will create a vector layer and assign attributes to
them, indicating whether they are healthy, lost, or partially lost.</p>
<div id="attribute-forms" class="section level2">
<h2>4.1 Attribute Forms</h2>
<p>We will first create a new layer and configure the attribute form to
capture the data about the features.</p>
<ol style="list-style-type: decimal">
<li>Go to <em>Project → Open</em> and browse to the data package. Select
the <code>Digitizing.qgz</code> project and click <em>Open</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_01.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>This project contains the <code>OSM Standard</code> basemap and the
<code>Banglore_1924_modified</code> georeferenced scanned map. To
digitize the waterbodies, let’s create a new vector layer. Click on the
<em>Layer → Create Layer → New GeoPackage Layer…</em> from the
menubar.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_02.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>In the <em>New GeoPackage Layer</em> dialog, click on the <em>…</em>
next to <em>Database</em> and browse to the project location. Enter the
file name as <code>banglore_lakes</code> and click <em>OK</em>. Now the
<em>Table name</em> will be auto-populated as
<code>banglore_lakes</code>. Choose <code>MultiPolygon</code> as
<em>Geometry type</em>. Let the CRS be in default <code>EPSG:4326</code>
projection.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_03.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>In the new layer, let’s add some basic fields. First, let’s add the
name field. Under the <em>New Field</em> section, in <em>Name</em> enter
<code>name</code>, in <em>Type</em> choose <code>Text Data</code>, and
in <em>Maximum length</em>, enter <code>50</code>. Now click <em>Add to
Fields List</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_04.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>The <em>Fields List</em> section will get updated. Similarly, add a
<code>status</code> filed with <em>Type</em> as <code>integer</code>.
Click <em>OK</em> to close the dialog.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_05.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Now the <code>banglore_lakes</code> layer will be added to the
<em>Layers</em> tab.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_06.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>let’s inspect the attribute table of the new layer. Right-click on
the <code>banglore_lakes</code> layer and click <em>Open Attribute
Table</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_07.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>In the <code>bangalore_lakes</code> attribute table, there are three
fields. <em>fid</em> is an integer field which is required by the
GeoPackage format and is autogenerated. The <em>name</em> and
<em>status</em> must be entered while digitizing the waterbodies. Close
the attribute table.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_08.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Again right-click on <code>banglore_lakes</code> layer and click
<em>Properties</em> to open the properties dialog.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_09.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>In the <em>Layer Properties</em> dialog, choose <em>Attribute
Form</em>. Under <em>Fields</em>, select <em>status</em>. Choose the
<em>Widget Type</em> as <code>Value Map</code>. Value Map allows us to
create a drop-down menu that allows you to pick from a predefined set of
values.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>The status field will be set as a drop-down with these three values.
Enter the value and description as follows</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="center">Value</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">Healthy</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">Partially Lost</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="left">Lost</td>
</tr>
</tbody>
</table>
<p><img src="images/introduction_to_qgis/digitizing_part1_11.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="12" style="list-style-type: decimal">
<li>We require this field’s input must be given for every feature, so
let’s make this a mandatory field. Under <em>Constraints</em> check
<em>Not null</em> and <em>Enforce not null constraint</em>. Click
<em>OK</em> to save the changes and close the properties dialog.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part1_12.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Save the project. Your results should match the contents of the
<code>Digitizing_Checkpoint1.qgz</code> file in the solutions
folder.</p>
<div id="challenge-8" class="section level3">
<h3>4.1.1 Challenge</h3>
<p>The <strong>fid</strong> column contains auto-increment unique id for
each feature.The GeoPackage format requires this integer field to
maintain data integrity. Manually overriding this id to a different
value can cause data corruption. Edit the attribute form for the
<strong>fid</strong> field so that it is not user-editable.</p>
</div>
</div>
<div id="digitizing-polygons" class="section level2">
<h2>4.2 Digitizing Polygons</h2>
<ol style="list-style-type: decimal">
<li>Before we start digitizing, let’s enable the snapping toolbar. This
toolbar will help select the nearby vertices and avoid invalid
geometries. Right-click on the toolbar and check the <em>Snapping
Toolbar</em> to enable it.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Now the snapping toolbar will be added to the main QGIS.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Enable snap setting by clicking <em>Enable Snapping</em> button.
Zoom to any part of the map containing a waterbody. Toggle the
visibility of the <code>Banglore_1924_modified</code> layer and check if
the lake exists in the current basemap. This will be helpful in entering
the attribute of the lake you will digitize.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Turn the <code>Banglore_1924_modified</code> on. Select the
<code>banglore_lakes</code> layer and start digitizing the waterbody.
Click the <em>Toggle editing</em> followed by the <em>Add Polygon
Feature</em> button. Starting from an edge, keep on adding vertices
using left-click. Once the polygon is fully digitized, right-click to
complete it.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Now you will be prompted by the <em>Feature Attributes</em> dialog
to enter the attributes values for the feature you just created. By
referring to the <code>OSM Standard</code> basemap, enter the
<em>name</em> and select the <em>status</em> of the waterbody. Click
<em>OK</em></li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Now the polygon show the fully digitized feature.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Zoom to another waterbody and digitize with the same process. If the
waterbody name is unavailable in both basemap and scanned map, leave the
<em>name</em> field empty and select the <em>status</em> of the
waterbody. Click <em>OK</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Digitize all the available waterbodies. Once completed, click on the
<em>Save Layer Edits</em> button and turn off the editing mode by
pressing the <em>Toggle Editing</em> button.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>let’s inspect the attribute table of the digitized layer. Now
right-click on the <code>banglore_lakes</code> layer and click <em>Open
Attribute Table</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_9.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>The Attribute Table contains <code>24</code> digitized features. You
can note the <em>fid</em> column is auto-populated with a unique value
for each record. Close the attribute table.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_10.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>Now let’s save the project, click <em>Project → Save</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/digitizing_part2_11.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Your results should now match the contents of the
<code>Digitizing_Checkpoint2.qgz</code> file in the solutions
folder.</p>
<div id="challenge-9" class="section level3">
<h3>4.2.1 Challenge</h3>
<p>Style the layer based on the <em>status</em> column. This column has
categorical values that can be used assign a different color to each
waterbody.</p>
<p>Hint: Use the <strong>Categorized</strong> renderer.</p>
<p><img src="images/introduction_to_qgis/digitizing_part2_challenge.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="concept-introduction-to-openstreetmap" class="section level1">
<h1>Concept: Introduction to OpenStreetMap</h1>
<p><a
href="https://docs.google.com/presentation/d/1hiVXo82VnRHrQBroxzrByYod8CeNvsB1iVwy6q62mz8/edit?usp=sharing"
target="_blank"><img
src="images/introduction_to_qgis/osm_presentation.png" width="400"
alt="View Presentation" /></a></p>
<p><a
href="https://docs.google.com/presentation/d/1hiVXo82VnRHrQBroxzrByYod8CeNvsB1iVwy6q62mz8/edit?usp=sharing"
target="_blank">View the Presentation ↗</a></p>
</div>
<div id="geoprocessing" class="section level1">
<h1>5. Geoprocessing</h1>
<p>Geoprocessing refers to the set of operations used to transform the
input data to create a new dataset. This section will learn about some
essential vector and raster geoprocessing tools to solve a complex
spatial analysis problem.</p>
<p>In this analysis, we will learn how to download vector data from
OpenStreetMap and use it to determine the number of people who live
within 1 km of a metro station.</p>
<div id="download-openstreetmap-data" class="section level2">
<h2>5.1 Download OpenStreetMap Data</h2>
<ol style="list-style-type: decimal">
<li>Open QGIS. We will first load a layer with the boundary for the city
of Bengaluru, India. This file comes in the GeoJSON format. Click on the
Open Data Source Manager button. Select the <em>Vector</em> tab. Click
the <em>…</em> button next to <em>Vector Dataset(s)</em> and browse the
data directory. Locate the <code>bangalore.json</code> file and click
<em>Open</em>. In the <em>Data Source Manager</em> window, click
<em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Now, we will query the OpenStreetMap database to get a vector layer
of railway stations in the city. We will use the
<strong>QuickOSM</strong> plugin for this task. From the
<em>Plugins</em> menu, choose <em>Manage and Install Plugins…</em>.
Under the <em>All</em> tab, search for <strong>quickosm</strong>. Click
on the <em>Install Plugin</em>, to add this plugin to QGIS.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Once installed, go to <strong>Vector → QuickOSM →
QuickOSM</strong>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>OpenStreetMap uses a tagging system to record properties of physical
features. The tags and the key/value pairs are described in <a
href="https://wiki.openstreetmap.org/wiki/Map_Features">OpenStreetMap
wiki</a>. The railway stations are tagged with
<code>railway=station</code>. Enter <code>railway</code> as the
<em>Key</em>, <code>station</code> as the <em>Value</em> and
<em>Bangalore</em> as the geographic filter <em>In</em>. Expand the
<em>Advanced</em> section and check only the <em>Node</em> and
<em>Points</em> boxes. Click <em>Run Query</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Once the query finishes, you will see a new layer,
<code>railway_station_Bangalore</code> loaded in the canvas. This
includes all railway stations - including the ones operator by Indian
Railways and stations under construction. We can apply a filter to
select only the operational metro stations. Right-click the layer and
select <em>Filter</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>In the <em>Query Builder</em>, enter the following expression and
click <em>OK</em>.</li>
</ol>
<blockquote>
<p>Note use of <code>IS NOT</code> operator instead of <code>!=</code>.
The reason is that these columns contain <strong>NULL</strong> records.
<em>NULL</em> is not a value that cannot be equal or not equal to
another value. The <code>IS NOT</code> operator will match all records
that do not match the value, including NULL records.</p>
</blockquote>
<pre><code>&quot;operator&quot; = &#39;BMRCL&#39; AND 
&quot;disused&quot; IS NOT &#39;yes&#39; AND 
&quot;disused:railway&quot; IS NOT &#39;station&#39;</code></pre>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Now, the map will update to show all the operational metro stations
in the city.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>You will notice a memory icon next to the
<code>railway_station_Bangalore</code> layer in the <em>Layers</em>
panel, indicating that it is a temporary scratch layer. If we do not
save it, it will go away when we close QGIS. Right-click on it and
select <em>Make Permanent</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_8.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Click <em>…</em> next to <em>File name</em> and save the file as
<code>railway_station_Bangalore.gpkg</code>. Click <em>OK</em>. We have
now saved the layer to the disk. Save your project as
<code>Geoprocessing.qgz</code>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_9.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We have now completed the data download and pre-processing steps.
Your output should match the contents of the
<code>Geoprocessing_Checkpoint1.qgz</code> file in the solutions
folder.</p>
<div id="challenge-10" class="section level3">
<h3>5.1.1 Challenge</h3>
<p>You will notice that the attribute table for the
<code>railway_station_bangalore</code> layer has many columns. Open the
attribute table and delete all the columns except the
<strong>fid</strong> and <strong>osm_id</strong> columns. Hint: Use the
<em>Delete field</em> tool from the attribute table.</p>
<p><img src="images/introduction_to_qgis/geoprocessing_part1_challenge.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="reproject-and-buffer" class="section level2">
<h2>5.2 Reproject and Buffer</h2>
<ol style="list-style-type: decimal">
<li>Now, the map will update to show only the operation metro stations
in the city. Next, we need to apply a <em>Buffer</em> to these stations
to find areas within 1km. But our data comes in the EPSG:4326 WGS84
Geographic Projection - which has degrees as units. To do geoprocessing
operations on this layer in projected units such as kilometers, we must
first reproject the layer in a suitable projected coordinate reference
system (CRS). Go to <strong>Processing → Toolbox</strong>. Search for
and locate the <strong>Vector general → Reproject layer</strong>
algorithm. Double-click to launch it.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Choose <code>railway_station_Bangalore</code> as the <em>Input
layer</em>. Select <code>EPSG:32643 - WGS 84 UTM Zone 43N</code> as the
<em>Target CRS</em>. Name the <em>Reprojected</em> layer as
<code>metro_stations_reprojected.gpkg</code>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Once the reprojected layer <code>metro_stations_reprojected</code>
is created, search for the <strong>Vector geometry → Buffer</strong>
algorithm and double-click to launch the algorithm.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Select <code>metro_stations_reprojected</code> as the <em>Input
layer</em>. Enter <strong>1 kilometers</strong> as the
<em>Distance</em>. Check the <em>Dissolve result</em> option and name
the <em>Buffered</em> output layer as
<code>metro_stations_buffer.gpkg</code>. Click <em>Run</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>The layer now has a polygon representing areas within 1km of a metro
station. Now that we are done with the geoprocessing operation, let’s
convert the result back to the original projection to use it and other
layers. Search for <strong>Vector general → Reproject layer</strong>
algorithm and launch it.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Select <code>metro_stations_buffer</code> as the <em>Input
layer</em> and <code>EPSG:4326 -WGS 84</code> as the <em>Target
CRS</em>. Name the output as
<code>metro_station_buffer_reprojected.gpkg</code>. Click
<em>Run</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>A new layer <code>metro_station_buffer_reprojected</code> will be
added to the canvas. We will now remove the intermediate layers from the
project. Hold the <em>Shift</em> key and select the
<code>metro_station_buffer</code>,
<code>metro_stations_reprojected</code> and
<code>railway_station_Bangalore</code> layers. Right-click and select
<em>Remove Layer…</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_7.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>We now have a layer representing the area within 1 km of a metro
station within the city of Bengaluru.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part2_8.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Your output should match the contents of the
<code>Geoprocessing_Checkpoint2.qgz</code> file in the solutions
folder.</p>
<div id="challenge-11" class="section level3">
<h3>5.2.1 Challenge</h3>
<p>Your data package contains a dataset called
<code>bangalore_pubs.gpkg</code> with the location of all pubs within
the city. Select all the pubs from the layer within 1km of a metro
station. Hint: Use the <strong>Select by Location</strong> tool from the
Processing Toolbox.</p>
</div>
</div>
<div id="calculate-zonal-statistics" class="section level2">
<h2>5.3 Calculate Zonal Statistics</h2>
<p>We will now use a population grid and overlay the buffered polygon to
calculate the number of people who live within the buffer zone.</p>
<ol style="list-style-type: decimal">
<li>Click on the Open Data Source Manager button. Select the
<em>Raster</em> tab. Click the <em>…</em> button next to <em>Raster
Dataset(s)</em> and browse the data directory. Locate the
<code>bangalore_ppp_2020_constrained.tif</code> in the data package.
Click <em>Add</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part3_1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Select the <code>bangalore_ppp_2020_constrained</code> layer and use
the <em>Identify</em> tool to explore the pixel values. The resolution
of the raster is 100m x 100m per pixel. The raster layer has only one
band, and the pixel value is the estimated number of people within the
100 sq.km area. Click the <em>Pan Map</em> button (Hand icon) to exit
the <em>Identify</em> mode.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part3_2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>We can determine the total population by summing up the values from
the pixels that fall within a polygon. This operation is known as
<em>Zonal Statistics</em>. Search for and locate the <strong>Raster
analysis → Zonal statistics</strong> algorithm. This algorithm would add
a new attribute to each layer with the total population contained within
the polygons—double-click to launch it.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part3_3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>In the <em>Zonal Statistics</em> dialog, select the
<code>metro_station_buffer_reprojected</code> as the <em>Input
layer</em> and <code>bangalore_ppp_2020_constrained</code> as the
<em>Raster layer</em>. Enter <strong>population_</strong> as the
<em>Output column prefix</em>. Click the <em>…</em> button next to
<em>Statistics to calculate</em> and choose only <strong>Sum</strong>.
Finally, next to <em>Zonal Statistics</em> output, click the
<code>...</code> and save the layer as
<code>metro_station_buffer_pop.gpkg</code> Click <em>Run</em>.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part3_4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Now, a new layer, <code>metro_station_buffer_pop</code>, will be
added to the canvas. Right-click the layer and select <em>Open Attribute
Table</em>. You will see a new field <strong>population_sum</strong>
field containing the population within the buffer polygon.</li>
</ol>
<p><img src="images/introduction_to_qgis/geoprocessing_part3_5.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Your output should match the contents of the
<code>Geoprocessing_Checkpoint3.qgz</code> file in the solutions
folder.</p>
<div id="challenge-12" class="section level3">
<h3>5.3.1 Challenge</h3>
<p>Repeat the Zonal Statistics operation on the <code>bangalore</code>
layer to calculate the city’s total population. Determine what
percentage of the city population lives within 1km of a metro
station.</p>
</div>
</div>
</div>
<div id="data-credits" class="section level1">
<h1>Data Credits</h1>
<ul>
<li>Land boundaries: Made with Natural Earth. Free vector and raster map
data @ naturalearthdata.com.</li>
<li>Earthquake Faults: Styron, Richard, and Marco Pagani. “The GEM
Global Active Faults Database.” Earthquake Spectra, vol. 36, no.
1_suppl, Oct. 2020, pp. 160–180, <a href="doi:10.1177/8755293020944182"
class="uri">doi:10.1177/8755293020944182</a>. Downloaded from <a
href="https://github.com/cossatot/gem-global-active-faults">The GEM
Global Active Faults Database. (GEM GAF-DB)</a></li>
<li>Significant Earthquakes: National Centers for Environmental
Information / World Data Service (NGDC/WDS): The significant Earthquake
Database. National Centers for Environmental Information, NOAA. <a
href="doi:10.7289/V5TD9V7K" class="uri">doi:10.7289/V5TD9V7K</a></li>
<li>2010 Neighborhood Tabulation Areas (NTAs), Department of City
Planning (DCP), New York City. Downloaded from <a
href="https://data.cityofnewyork.us/City-Government/2010-Neighborhood-Tabulation-Areas-NTAs-/cpf4-rkhq">NYC
Open Data Portal</a>.</li>
<li>New York City Population By Neighborhood Tabulation Areas: Compiled
by the Population Division – New York City Department of City Planning.
Downloaded from <a
href="https://data.cityofnewyork.us/City-Government/New-York-City-Population-By-Neighborhood-Tabulatio/swpk-hqdp">NYC
Open Data Portal</a>.</li>
<li>Bangalore 1924 Map: Historical Map of Bangalore, India, circa 1924.
Scan of a 1924 city map from “Murray’s 1924 Handbook”. Downloaded from
<a
href="https://commons.wikimedia.org/wiki/File:Bangalore1924_map.png">Wikimedia
Commons</a>.</li>
<li>OSM Tile Layer, Bangalore Metro Stations : (c) OpenStreetMap
contributors.</li>
<li>Bangalore Ward Maps Provided by <a
href="http://projects.datameet.org/Municipal_Spatial_Data/">Spatial Data
of Municipalities (Maps) Project</a> by Data{Meet}.</li>
<li>Bangalore Population Grid 2020: Downloaded from <a
href="https://www.worldpop.org/geodata/summary?id=6527">WorldPop</a> -
School of Geography and Environmental Science, University of
Southampton; Department of Geography and Geosciences, University of
Louisville; Departement de Geographie, Universite de Namur) and Center
for International Earth Science Information Network (CIESIN), Columbia
University (2018). Global High Resolution Population Denominators
Project - Funded by The Bill and Melinda Gates Foundation (OPP1134076).
<a href="https://dx.doi.org/10.5258/SOTON/WP00645"
class="uri">https://dx.doi.org/10.5258/SOTON/WP00645</a></li>
</ul>
</div>
<div id="license" class="section level1">
<h1>License</h1>
<p>This course material is licensed under a <a
href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
Attribution 4.0 International (CC BY 4.0)</a>. You are free to re-use
and adapt the material but are required to give appropriate credit to
the original author as below:</p>
<p><em>Introduction to QGIS Course</em> by Ujaval Gandhi <a
href="https://spatialthoughts.com">www.spatialthoughts.com</a></p>
<!--
If you would like to white-label these materials as part of a commercial offering, you can purchase a *Trainer License* for a small fee. Please [contact us](https://spatialthoughts.com/contact/) for pricing and terms.

This material is part of the *Trainer's Package* and the buyer gets a non-exclusive, non-transferable, perpetual license to the material. You can fully customise and brand the materials to your requirements.
-->
<hr />
<p><strong>This course is offered as an instructor-led online class.
Visit <a href="https://spatialthoughts.com/events/">Spatial Thoughts</a>
to know details of upcoming sessions.</strong></p>
<hr />
<p>© 2022 Spatial Thoughts <a
href="https://spatialthoughts.com">www.spatialthoughts.com</a></p>
</div>

<script defer src="https://cdn.commento.io/js/commento.js"></script>
<div id="commento"></div>
<!-- disqus 
<div id="disqus_thread" class="standardPadding"></div>

<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = 'https://courses.spatialthoughts.com' + location.pathname;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://spatialthoughts.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 -->                     



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
