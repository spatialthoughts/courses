var gsw = ee.Image("JRC/GSW1_4/GlobalSurfaceWater");
var hydrobasins = ee.FeatureCollection("WWF/HydroSHEDS/v1/Basins/hybas_7");
var basin = hydrobasins
  .filter(ee.Filter.eq('HYBAS_ID', 4071139640));
var geometry = basin.geometry();
Map.centerObject(geometry, 10);

var water = gsw.select('max_extent');

var clipped = water.clip(geometry);

var visParams = {min:0, max:1, palette: ['white','blue']};
Map.addLayer(clipped, visParams, 'Surface Water') ;

// Do unmask() to replace masked pixels with 0
// This avoids extra pixels along the edges
var clipped = clipped.unmask(0);
// Perform a morphological closing to fill holes in waterbodies
var waterProcessed = clipped
  .focalMax({
    'radius':30,
    'units': 'meters',
    'kernelType': 'square'})
  .focalMin({
    'radius':30,
    'units': 'meters',
    'kernelType': 'square'});
Map.addLayer(waterProcessed, visParams, 'Surface Water (Processed)');

// Exercise
// Replace the HYBAS_ID with the id of your selected basin
// Add an 'iterations' parameter with value 2 to 
// focalMax and focalMin functions to further process the data